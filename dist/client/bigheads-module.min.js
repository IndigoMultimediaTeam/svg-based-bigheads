const{colors:colors,safe_layers:safe_layers,parts:parts}=getFromJSON();export{colors};const data=function(){const{attributes_default:t,attributes_keys:e,attributes_nullable:r,attributes_objectbased:a}=function(){const t={href:""},e=[],r=[];for(let a,n=0,s=Object.keys(parts);a=s[n];n++){const n=Reflect.get(parts,a);let s;Array.isArray(n)?-1!==(s=n).indexOf("none")&&e.push(a):(s=Object.keys(n),r.push(a)),Reflect.set(t,a,s[0])}const a=Object.keys(t);return{attributes_default:t,attributes_keys:a,attributes_nullable:e,attributes_objectbased:r}}(),n=new WeakMap;function s(t){return-1!==a.indexOf(t)}return{attributes_default:t,attributes_keys:e,isNullable:t=>-1!==r.indexOf(t),isFromMultiplePieces:s,getNextPartName(t,e,r=1){const a=Reflect.get(parts,t),n=s(t)?Object.keys(a).filter(t=>"long"!==t):a;return n[(i=n.indexOf(e),o=r,l=n.length,(l+i+o%l)%l)];var i,o,l},get:e=>n.has(e)?n.get(e):function(e){const r=JSON.parse(JSON.stringify(t));return n.set(e,{attributes:r,els:{}}),n.get(e)}(e),setAttribute:({attributes:e},r,a=null)=>Reflect.set(e,r,a||t[r]),getAttribute:({attributes:t},e)=>t[e],hasElement:(t,e)=>Reflect.has(t.els,e),getElement:(t,e)=>Reflect.get(t.els,e),setElement:(t,e,r)=>Reflect.set(t.els,e,r),deleteElement:({els:t},e)=>!!Reflect.has(t,e)&&(Reflect.get(t,e).remove(),Reflect.deleteProperty(t,e))}}();export const parts_dictionary=Object.keys(parts).reduce(function(t,e){const r=parts[e],a=data.isFromMultiplePieces(e)?Object.keys(r).filter(t=>"long"!==t):r;return Reflect.set(t,e,a),t},{});export function isNotGenderType(t){return"breasts"!==t}const createElement=document.createElementNS.bind(document,"http://www.w3.org/2000/svg");function createGroupedElement(t){const e=Object.keys(t);return Object.assign({remove(){e.forEach(t=>this[t].remove())}},t)}function createSVG(){const t=createElement("svg");return t.setAttribute("viewBox","0 0 1000 990"),t}const setHref=(t,e)=>t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e);function createUSE(t){const e=createElement("use");return setHref(e,t),e}function mixinObservedAttributes(t,e){class r extends t{static get observedAttributes(){return e}}return e.forEach(t=>Reflect.defineProperty(r.prototype,t,{get(){return this.getAttribute(t)},set(e){return this.setAttribute(t,e)}})),r}const style_global={options:{allow:!0,fit:"contain",big_hat:"bigheads-hat-longhairs"},is_created:!1,create(){if(!this.options.allow||this.is_created)return!1;const t=document.createElement("style"),{fit:e,big_hat:r}=this.options;t.innerHTML=`svg-bigheads svg, svg-bigheads-part svg { all: unset; width: 100%; height: 100%; object-fit: ${e}; }`+`svg-bigheads .${r} { transform: scale(1.1) translate(-5%, -7.5%); }`,document.head.appendChild(t),this.is_created=!0}};function avatarPartHref(t,e,r=data.getAttribute(t,e)){return`${data.getAttribute(t,"href")}#${e}-${r}`}function findSafeLayer(t,e){for(let a,n,s=0;n=safe_layers[s];s++){if(!Array.isArray(n)){a=n;continue}const s=n.indexOf(e);if(-1!==s)return data.getElement(t,r(n,s)||a)}function r(e,r){if(0===r)return!1;for(let a,n=r-1;n>=0;n--)if(a=e[n],data.hasElement(t,a))return a;return!1}}function hairFullConfig(t){const e=parts.hair[t],r=(t,e,r={})=>Object.keys(t).filter(e=>"parent"!==e&&Boolean(t[e])).reduce((t,r)=>Reflect.set(t,r,e+"-"+r)&&t,r);let a=r(e,t);return e.parent&&(a=r(parts.hair[e.parent],e.parent,a)),a}function avatarUpdateHair(t,e){const r=data.getAttribute(e,"hair");data.deleteElement(e,"hair");const a="none"!==data.getAttribute(e,"hat"),n=t=>a&&data.getElement(e,"hat").classList.toggle(style_global.options.big_hat,t);if("none"===r)return n(0);const s=hairFullConfig(r),i=Object.keys(s).reduce(function(t,r){return"top"===r&&a||Reflect.set(t,r,createUSE(avatarPartHref(e,"hair",s[r]))),t},{});return Object.keys(i).forEach(r=>"front"===r?t.insertBefore(i[r],findSafeLayer(e,"hat")):t.insertBefore(i[r],data.getElement(e,"base"))),data.setElement(e,"hair",createGroupedElement(i)),n(Reflect.has(i,"back"))}const avatar_svg=function(){const t=new WeakMap;return{create(e){const r=e.appendChild(createSVG());return t.set(e,r),r},get:e=>t.get(e),appendUSE(t,e,r){const a=createUSE(avatarPartHref(e,r));return data.setElement(e,r,t.appendChild(a)),a},insertAfterUSE(t,e,r,a){const n=createUSE(avatarPartHref(e,r));return data.setElement(e,r,t.insertBefore(n,a.nextElementSibling)),n},avatarPartHref:(t,e,r=data.getAttribute(t,e))=>`${data.getAttribute(t,"href")}#${e}-${r}`,remove(e){t.get(e).remove(),Reflect.deleteProperty(t,e)}}}();class SVGBigHeadsElement extends(mixinObservedAttributes(HTMLElement,data.attributes_keys)){static get tag_name(){return"svg-bigheads"}constructor(){super(),style_global.create()}attributeChangedCallback(t,e,r){return r!==e&&(data.setAttribute(data.get(this),t,r),this.update(t),!0)}connectedCallback(){const t=avatar_svg.create(this),e=data.get(this),r=avatar_svg.appendUSE.bind(null,t,e);safe_layers.forEach(t=>{if(!Array.isArray(t))return r(t);t.forEach(t=>{if("none"!==data.getAttribute(e,t))return r(t)})}),avatarUpdateHair(t,e)}update(t){const e=avatar_svg.get(this);if(!e)return!1;const r=data.get(this);if("href"===t)return Reflect.set(r,"els",{}),avatar_svg.remove(this),this.connectedCallback();if(data.isFromMultiplePieces(t))return avatarUpdateHair(e,r);const a=()=>"hat"===t&&avatarUpdateHair(e,r),n=data.getAttribute(r,t);return"none"===n?a(data.deleteElement(r,t)):data.isNullable(t)&&!data.hasElement(r,t)?a(avatar_svg.insertAfterUSE(e,r,t,findSafeLayer(r,t))):a(setHref(data.getElement(r,t),avatarPartHref(r,t,n)))}}customElements.define(SVGBigHeadsElement.tag_name,SVGBigHeadsElement);class SVGBigHeadsPartElement extends(mixinObservedAttributes(HTMLElement,["href","type","value"])){static get tag_name(){return SVGBigHeadsElement.tag_name+"-part"}constructor(){super(),style_global.create()}attributeChangedCallback(t,e,r){return"type"!==t&&(!(!this._svg||r===e)&&this.connectedCallback())}connectedCallback(){const[t,e,r]=this.config;if(this._svg&&this._svg.remove(),this._svg=this.appendChild(createSVG()),!t||"none"===e)return!1;const a=e=>this._svg.appendChild(createUSE(`${r}#${t}-${e}`));if(!data.isFromMultiplePieces(t))return a(e);const n=hairFullConfig(e);["back","top","front"].forEach(t=>a(n[t]))}get config(){const[t,e,r]=this.constructor.observedAttributes.map(t=>this.getAttribute(t));return[e,r,t]}nextValue(t=1){return this.setAttribute("value",data.getNextPartName(this.getAttribute("type"),this.getAttribute("value"),t))}}customElements.define(SVGBigHeadsPartElement.tag_name,SVGBigHeadsPartElement);export{SVGBigHeadsElement,SVGBigHeadsPartElement};export function nextPartName(t,e,r=1){return data.getNextPartName(t,e,r)}function getFromJSON(){return JSON.parse('{"colors":{"hair":"#d96e27","clothes":"#d67070","hat":"#5bcaf0","mouth":"#dd3e3e","skin":"#fdd2b2"},"safe_layers":["base","eyes","clothes",["facialhair","eyebrow"],"mouth",["nose","breasts","hat","glasses"]],"parts":{"glasses":["none","big","pincenez","sun"],"breasts":["none","breasts"],"eyebrow":["none","angry","neutral","smiling"],"facialhair":["none","big","stubble"],"hair":{"none":{"front":true},"afro":{"front":true,"top":true},"balding":{"front":true},"bob":{"front":true},"bold":{"front":true},"bun":{"front":true,"top":true},"buzz":{"front":true},"long":{"front":true},"long01":{"back":true,"parent":"long"},"long02":{"back":true,"parent":"long"},"long03":{"back":true,"parent":"long"},"mohawk":{"top":true},"serious":{"front":true},"short":{"front":true},"simple":{"front":true},"stubble":{"front":true}},"hat":["none","beanie","turban"],"nose":["none","big","normal","up"],"base":["base"],"clothes":["dressshirt","tanktop","tshirt","vneck"],"eyes":["narrower","round","semiround","simple","thin"],"mouth":["lips","neutral","open","smile"]}}')}